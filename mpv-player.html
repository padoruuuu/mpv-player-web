<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>MPV.js Player</title>
  <style>
    html, body {
      margin: 0; padding: 0;
      width: 100%; height: 100%;
      background: black;
      overflow: hidden;
    }
    #mpv-container {
      width: 100%; height: 100%;
      position: relative;
    }
    canvas {
      width: 100%; height: 100%;
      display: block;
    }
  </style>
</head>
<body>
  <div id="mpv-container"></div>

  <!-- MPV.js runtime -->
  <script src="libmpv.js"></script>
  <script>
    (async () => {
      // Grab ?src= from URL
      const params = new URLSearchParams(window.location.search);
      const videoUrl = params.get('src');
      if (!videoUrl) {
        document.body.innerHTML = '<p style="color:white;padding:1em;">Error: no <code>?src=</code> parameter provided.</p>';
        return;
      }

      // Insert canvas
      const container = document.getElementById('mpv-container');
      const canvas = document.createElement('canvas');
      container.appendChild(canvas);

      // Initialize MPV.js
      await libmpv.init({ wasmUrl: 'libmpv.wasm' });

      // Create the player
      const player = new libmpv.Player(canvas, {
        audio: true,
        logLevel: 'error',
      });

      // Load & play
      await player.load(videoUrl);
      player.play();
    })();
  </script>
</body>
</html>
